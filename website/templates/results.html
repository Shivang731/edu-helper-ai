{% extends "base.html" %}
{% block content %}
  <div class="content-header">
    <h1 class="content-title">Results for {{ filename }}</h1>
  </div>
  <div class="row">
    <div class="col">
      <h4>Summary</h4>
      <p>{{ summary }}</p>
      <a href="{{ url_for('download_audio') }}" class="btn btn-outline-primary">üîä Audio</a>
      <a href="{{ url_for('download_markdown') }}" class="btn btn-outline-secondary">‚¨áÔ∏è Markdown</a>
    </div>
    <div class="col">
      <h4>Flashcards ({{ flashcards|length }})</h4>
      <ul>
        {% for card in flashcards %}
          <li><strong>Q:</strong> {{ card.question }}<br/><strong>A:</strong> {{ card.answer }}</li>
        {% endfor %}
      </ul>
    </div>
  </div>
  <section class="content-section" id="search">
    <h4>Semantic Search</h4>
    <form method="post" class="input-group">
      <input name="query" class="form-control" placeholder="Ask a question‚Ä¶" value="{{ query or '' }}"/>
      <button class="btn btn-primary">Search</button>
    </form>
    {% if hits %}
      {% for h in hits %}
        <div class="card mt-2">
          <div class="card-body">
            <p>{{ h.text }}</p>
            <span class="badge bg-info">Score: {{ '%.2f'|format(h.score) }}</span>
          </div>
        </div>
      {% endfor %}
    {% elif query %}
      <p>No results found for ‚Äú{{ query }}‚Äù.</p>
    {% endif %}
  </section>
{% endblock %}
